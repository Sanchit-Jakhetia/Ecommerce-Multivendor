<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seller Dashboard - MultiVendor</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-gradient-to-b from-gray-100 via-gray-50 to-gray-100 text-gray-900 min-h-screen" style="zoom: 1;">

  <!-- Header (Loaded via JS) -->
  <div id="header-container"></div>

  <main class="w-full max-w-7xl mx-auto px-4 py-10">
    <h1 class="text-3xl font-bold mb-8">Seller Dashboard</h1>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-10">
      <div class="bg-white rounded-xl shadow p-6 flex flex-col items-center">
        <span class="text-4xl text-yellow-500 mb-2"><i class="fas fa-box"></i></span>
        <div class="text-2xl font-bold" id="product-count">0</div>
        <div class="text-gray-500">Products</div>
      </div>
      <div class="bg-white rounded-xl shadow p-6 flex flex-col items-center">
        <span class="text-4xl text-green-500 mb-2"><i class="fas fa-rupee-sign"></i></span>
        <div class="text-2xl font-bold" id="total-sales">â‚¹0</div>
        <div class="text-gray-500">Total Sales</div>
      </div>
      <div class="bg-white rounded-xl shadow p-6 flex flex-col items-center">
        <span class="text-4xl text-blue-500 mb-2"><i class="fas fa-star"></i></span>
        <div class="text-2xl font-bold" id="avg-rating">0.0</div>
        <div class="text-gray-500">Avg. Rating</div>
      </div>
    </div>
    <section class="bg-white rounded-xl shadow p-6 mb-10">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold">Your Products</h2>
        <button id="add-product-btn" class="bg-yellow-400 hover:bg-yellow-500 text-white font-bold px-4 py-2 rounded shadow">Add Product</button>
      </div>
      <!-- Add/Edit Product Modal -->
      <div id="product-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-lg p-8 w-full max-w-lg relative">
          <button id="close-modal-btn" class="absolute top-2 right-2 text-2xl text-gray-400 hover:text-gray-700">&times;</button>
          <h3 id="modal-title" class="text-xl font-bold mb-4">Add Product</h3>
          <form id="product-form" class="space-y-4">
            <input type="hidden" id="product-id" />
            <div>
              <label class="block mb-1 font-semibold">Name</label>
              <input type="text" id="product-name" class="w-full border rounded px-3 py-2" required />
            </div>
            <div>
              <label class="block mb-1 font-semibold">Price</label>
              <input type="number" id="product-price" class="w-full border rounded px-3 py-2" required min="0" />
            </div>
            <div>
              <label class="block mb-1 font-semibold">Stock</label>
              <input type="number" id="product-stock" class="w-full border rounded px-3 py-2" required min="0" />
            </div>
            <div>
              <label class="block mb-1 font-semibold">Image URL</label>
              <input type="url" id="product-image" class="w-full border rounded px-3 py-2" required />
            </div>
            <div>
              <label class="block mb-1 font-semibold">Description</label>
              <textarea id="product-description" class="w-full border rounded px-3 py-2" rows="3"></textarea>
            </div>
            <button type="submit" class="w-full bg-yellow-400 hover:bg-yellow-500 text-white font-bold py-3 rounded">Save Product</button>
          </form>
        </div>
      </div>
      <div id="seller-products" class="overflow-x-auto w-full">
        <table class="min-w-full w-full text-left text-sm">
          <thead>
            <tr>
              <th class="py-2 px-4">Image</th>
              <th class="py-2 px-4">Name</th>
              <th class="py-2 px-4">Price</th>
              <th class="py-2 px-4">Stock</th>
              <th class="py-2 px-4">Rating</th>
            </tr>
          </thead>
          <tbody id="seller-products-tbody">
            <!-- Products will be injected here -->
          </tbody>
        </table>
      </div>
    </section>
    <section class="bg-white rounded-xl shadow p-6">
      <h2 class="text-2xl font-bold mb-4">Recent Orders</h2>
      <div id="recent-orders" class="overflow-x-auto">
        <table class="min-w-full text-left text-sm">
          <thead>
            <tr>
              <th class="py-2 px-4">Order ID</th>
              <th class="py-2 px-4">Product</th>
              <th class="py-2 px-4">Buyer</th>
              <th class="py-2 px-4">Amount</th>
              <th class="py-2 px-4">Status</th>
            </tr>
          </thead>
          <tbody id="orders-table-body">
            <!-- Orders will be injected here -->
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Footer (Loaded via JS) -->
  <div id="footer-container"></div>

  <script src="js/auth.js"></script>
  <script src="js/seller-dashboard.js"></script>
  <script src="js/main.js"></script>
  <script>
    // Dynamically load header and footer
    async function loadComponent(id, url, callback) {
      const res = await fetch(url);
      document.getElementById(id).innerHTML = await res.text();
      if (callback) callback();
    }
    loadComponent('header-container', 'components/header.html', () => {
      // Always call updateHeader after header loads
      if (typeof updateHeader === 'function') updateHeader();
    });
    loadComponent('footer-container', 'components/footer.html');
  </script>
  <script src="js/chatbot.js"></script>
  <!-- Font Awesome for icons -->
  <script src="https://kit.fontawesome.com/4b8b8b8b8b.js" crossorigin="anonymous"></script>
</body>
</html>
